# 3D Globe for Kids (AI Version)

ä¸€ä¸ªé¢å‘å„¿ç«¥çš„ 3D ä¸–ç•Œåœ°å›¾æ¢ç´¢åº”ç”¨ï¼Œé›†æˆäº†ç«å±±å¼•æ“ AI å¤§æ¨¡å‹ï¼Œæä¾›ä¸°å¯Œçš„å›½å®¶ä¿¡æ¯å’Œå›¾ç‰‡ç”ŸæˆåŠŸèƒ½ã€‚

## âœ¨ ç‰¹æ€§

- ğŸŒ åŸºäº Three.js çš„äº¤äº’å¼3Dåœ°çƒå±•ç¤º
- ğŸ¤– é›†æˆç«å±±å¼•æ“ AI å¤§æ¨¡å‹ï¼Œè‡ªåŠ¨ç”Ÿæˆå›½å®¶ä¿¡æ¯
- ğŸ¨ AI å›¾ç‰‡ç”ŸæˆåŠŸèƒ½ï¼Œå¯ç”Ÿæˆå›½å®¶ç‰¹è‰²å›¾ç‰‡
- ğŸ—ºï¸ æ”¯æŒæ—‹è½¬ã€ç¼©æ”¾å’Œå¹³ç§»çš„åœ°å›¾æ§åˆ¶
- ğŸ³ï¸ å±•ç¤ºå„å›½å›½æ——å’ŒåŸºæœ¬ä¿¡æ¯
- ğŸ’° å±•ç¤ºå„å›½è´§å¸ä¿¡æ¯
- ğŸ“± å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒå„ç§è®¾å¤‡

## ğŸŒ åœ°ç†æ”¿æ²»å®ä½“è¦†ç›–

æœ¬åº”ç”¨åŒ…å«äº† 284 ä¸ªåœ°ç†æ”¿æ²»å®ä½“çš„æ˜ å°„ï¼š

### æ ‡å‡†å›½å®¶å’Œåœ°åŒº (234)
- æ‰€æœ‰è”åˆå›½æˆå‘˜å›½
- ä¸»è¦çš„è‡ªæ²»é¢†åœ°
- æµ·å¤–å±åœ°
- ç‰¹åˆ«è¡Œæ”¿åŒºï¼ˆå¦‚é¦™æ¸¯ã€æ¾³é—¨ï¼‰
- æœ‰äº‰è®®åœ°åŒº
- é‡è¦çš„å²›å±¿å›½å®¶å’Œåœ°åŒº

### ç‰¹æ®Šåœ°ç†æ”¿æ²»å®ä½“ (50)
- å†å²å›½å®¶ï¼ˆå¦‚å‰è‹è”ã€å—æ–¯æ‹‰å¤«ï¼‰
- åœ°ç†åŒºåŸŸï¼ˆå¦‚åŒ—æ¬§ã€ä¸­äºšï¼‰
- æ”¿æ²»ç»æµè”ç›Ÿï¼ˆå¦‚æ¬§ç›Ÿã€ä¸œç›Ÿï¼‰
- æ–‡åŒ–åŒºåŸŸï¼ˆå¦‚é˜¿æ‹‰ä¼¯ä¸–ç•Œã€æ‹‰ä¸ç¾æ´²ï¼‰
- è·¨å›½åœ°ç†åŒºåŸŸï¼ˆå¦‚é«˜åŠ ç´¢åœ°åŒºã€è¨èµ«å‹’åœ°åŒºï¼‰

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- Three.js - 3Dæ¸²æŸ“å¼•æ“
- D3.js - åœ°ç†æ•°æ®å¤„ç†
- TopoJSON - åœ°ç†æ•°æ®æ ¼å¼

### åç«¯
- Express.js - Web æœåŠ¡å™¨æ¡†æ¶
- MongoDB - æ•°æ®åº“
- Mongoose - MongoDB ODM

### AI é›†æˆ
- ç«å±±å¼•æ“ AI å¤§æ¨¡å‹
  - æ–‡æœ¬ç”Ÿæˆï¼šé€šè¿‡ `ep-20250107143140-b64cm` æ¨¡å‹
  - å›¾ç‰‡ç”Ÿæˆï¼šé€šè¿‡ `high_aes_general_v21_L` æ¨¡å‹

## ğŸ”§ ç¯å¢ƒé…ç½®

### å¿…éœ€çš„ç¯å¢ƒå˜é‡
```env
# MongoDB é…ç½®
MONGODB_URI=your_mongodb_uri
MONGODB_DB_NAME=your_db_name
MONGO_USER=your_username
MONGO_PASS=your_password
MONGO_HOST_PORT=your_host:port

# ç«å±±å¼•æ“ API é…ç½®
VOLCENGINE_API_KEY=your_api_key
DOUPACK_MODEL_ID=ep-20250107143140-b64cm
VOLCENGINE_CV_ENDPOINT=https://visual.volcengineapi.com
VOLCENGINE_AK=your_access_key
VOLCENGINE_SK=your_secret_key
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

1. å…‹éš†ä»“åº“
```bash
git clone https://github.com/herokangkai/3D_AI_Globe_for_kids
```

2. å®‰è£…ä¾èµ–
```bash
cd server
npm install
```

3. é…ç½®ç¯å¢ƒå˜é‡
å¤åˆ¶ `.env.example` åˆ° `.env` å¹¶å¡«å†™å¿…è¦çš„é…ç½®ä¿¡æ¯

4. å¯åŠ¨æœåŠ¡å™¨
```bash
npm start
```

## ğŸ“¦ API ç«¯ç‚¹

### AI ç”Ÿæˆæ¥å£
- `POST /api/ai/generate-country-info`
  - ç”Ÿæˆå›½å®¶åŸºæœ¬ä¿¡æ¯
  - åŒ…æ‹¬ï¼šé¦–éƒ½ã€äººå£ã€é¢ç§¯ã€è´§å¸ã€ä»£è¡¨æ€§åŠ¨ç‰©ç­‰

- `POST /api/ai/generate-image`
  - ç”Ÿæˆå›½å®¶ç›¸å…³å›¾ç‰‡
  - æ”¯æŒï¼šå›½æ——ã€è´§å¸ã€ä»£è¡¨æ€§åŠ¨ç‰©ç­‰

### å›½å®¶ä¿¡æ¯æ¥å£
- `GET /api/countries/:code`
  - è·å–ç‰¹å®šå›½å®¶çš„å®Œæ•´ä¿¡æ¯
- `GET /api/countries/:code/basic`
  - è·å–å›½å®¶åŸºæœ¬ä¿¡æ¯
- `GET /api/countries/:code/images`
  - è·å–å›½å®¶ç›¸å…³å›¾ç‰‡

## ğŸ“‚ é¡¹ç›®ç»“æ„
```
server/
â”œâ”€â”€ routes/          # API è·¯ç”±
â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹
â”œâ”€â”€ services/        # ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ scripts/         # å·¥å…·è„šæœ¬
â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ countryCodeMap.js  # å›½å®¶ä»£ç æ˜ å°„é…ç½®
â””â”€â”€ server.js        # ä¸»æœåŠ¡å™¨æ–‡ä»¶
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ issues å’Œ pull requestsï¼

## ğŸ“ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

- [ç«å±±å¼•æ“](https://www.volcengine.com/)
- [Three.js](https://threejs.org/)
- [D3.js](https://d3js.org/)
- [MongoDB](https://www.mongodb.com/)

## ğŸ”Œ API å¯¹æ¥è¯´æ˜

### ç«å±±å¼•æ“ AI æ¨¡å‹é›†æˆ

#### 1. æ–‡æœ¬ç”Ÿæˆæ¨¡å‹
ä½¿ç”¨ç«å±±å¼•æ“è±†åŒ…å¤§æ¨¡å‹è¿›è¡Œå›½å®¶ä¿¡æ¯ç”Ÿæˆã€‚

```javascript
// è¯·æ±‚é…ç½®
const endpoint = 'https://ark.cn-beijing.volces.com';
const modelId = 'ep-20250107143140-b64cm';

// è¯·æ±‚ç¤ºä¾‹
const response = await axios.post(`${endpoint}/api/v3/chat/completions`, {
    model: modelId,
    messages: [
        {
            role: "system",
            content: "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„åœ°ç†å’Œæ–‡åŒ–ä¸“å®¶ï¼Œæ“…é•¿æä¾›å‡†ç¡®ä¸”ç®€æ´çš„å›½å®¶ä¿¡æ¯ã€‚"
        },
        {
            role: "user",
            content: `è¯·ç®€æ˜æ‰¼è¦åœ°æè¿°${countryName}çš„ä»¥ä¸‹ä¿¡æ¯ï¼š...`
        }
    ]
}, {
    headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${VOLCENGINE_API_KEY}`
    }
});
```

#### 2. å›¾ç‰‡ç”Ÿæˆæ¨¡å‹
ä½¿ç”¨ç«å±±å¼•æ“å›¾åƒç”ŸæˆæœåŠ¡ç”Ÿæˆå›½å®¶ç›¸å…³å›¾ç‰‡ã€‚

```javascript
// è¯·æ±‚é…ç½®
const endpoint = 'https://visual.volcengineapi.com';
const requestData = {
    req_key: "high_aes_general_v21_L",
    prompt: prompt,               // å›¾ç‰‡ç”Ÿæˆæç¤ºè¯
    model_version: "general_v2.1_L",
    req_schedule_conf: "general_v20_9B_pe",
    width: 768,                  // å›¾ç‰‡å®½åº¦
    height: 512,                 // å›¾ç‰‡é«˜åº¦
    use_pre_llm: true,          // ä½¿ç”¨ LLM ä¼˜åŒ–æç¤ºè¯
    use_sr: true,               // ä½¿ç”¨è¶…åˆ†è¾¨ç‡
    return_url: true            // è¿”å›å›¾ç‰‡ URL
};

// è®¤è¯ä¿¡æ¯ç”Ÿæˆ
const method = 'POST';
const canonicalUri = '/';
const queryParams = new URLSearchParams({
    Action: 'CVProcess',
    Version: '2022-08-31'
});

// ç­¾åç”Ÿæˆ
const { authorization, timestamp } = generateVisualAuth(
    method,
    canonicalUri,
    queryParams.toString(),
    headers,
    hashedPayload
);

// è¯·æ±‚ç¤ºä¾‹
const response = await axios({
    method: method,
    url: `${endpoint}/?${queryParams.toString()}`,
    headers: {
        'Content-Type': 'application/json',
        'Host': new URL(endpoint).host,
        'X-Content-Sha256': hashedPayload,
        'X-Date': timestamp,
        'Authorization': authorization
    },
    data: requestData
});
```

### API å“åº”ç¤ºä¾‹

#### 1. å›½å®¶ä¿¡æ¯ç”Ÿæˆ
```json
{
    "capital": "ä¸œäº¬",
    "population": "1.26äº¿",
    "area": "37.8ä¸‡å¹³æ–¹å…¬é‡Œ",
    "currency": {
        "name": "æ—¥å…ƒ",
        "description": "ä¸–ç•Œä¸»è¦è´§å¸ä¹‹ä¸€"
    },
    "famousAnimal": {
        "name": "æ—¥æœ¬çŒ•çŒ´",
        "description": "è±¡å¾ç€æ—¥æœ¬çš„è‡ªç„¶ä¸æ–‡åŒ–ä¼ ç»Ÿ"
    }
}
```

#### 2. å›¾ç‰‡ç”Ÿæˆ
```json
{
    "code": 10000,
    "data": {
        "image_urls": [
            "https://example.com/generated-image.jpg"
        ]
    }
}
```

### æ³¨æ„äº‹é¡¹

1. ç«å±±å¼•æ“ API è®¿é—®é™åˆ¶
   - æ–‡æœ¬ç”Ÿæˆï¼š20 QPS
   - å›¾ç‰‡ç”Ÿæˆï¼š2 QPS
   - å»ºè®®å®ç°è¯·æ±‚é˜Ÿåˆ—å’Œé”™è¯¯é‡è¯•æœºåˆ¶

2. ç¯å¢ƒå˜é‡é…ç½®
   ```env
   # å¿…éœ€çš„ç«å±±å¼•æ“é…ç½®
   VOLCENGINE_API_KEY=your_api_key    # è±†åŒ…å¤§æ¨¡å‹è®¿é—®å¯†é’¥
   VOLCENGINE_AK=your_access_key      # ç«å±±å¼•æ“è®¿é—®å¯†é’¥
   VOLCENGINE_SK=your_secret_key      # ç«å±±å¼•æ“å¯†é’¥
   ```

3. é”™è¯¯å¤„ç†
   ```javascript
   try {
       const response = await generateContent();
   } catch (error) {
       if (error.response) {
           console.error('API Error:', error.response.data);
           // å¤„ç† API é”™è¯¯å“åº”
       } else {
           console.error('Request Error:', error.message);
           // å¤„ç†ç½‘ç»œæˆ–å…¶ä»–é”™è¯¯
       }
   }
   ```
